# Quick Fix: Map Functionality Restored

## ‚úÖ What Was Fixed

I've temporarily restored the Google Maps API key to the native files so maps work immediately:

1. **iOS Info.plist** - API key restored
2. **Android AndroidManifest.xml** - API key restored  
3. **iOS AppDelegate.swift** - API key restored
4. **Server .env** - Added GOOGLE_MAPS_API_KEY

## ‚ö†Ô∏è Important: This is a Temporary Fix

The API keys are now back in the native files. For proper security:

1. **Rotate the exposed API key** (it was in git history)
2. **Set up proper environment variables** (see below)
3. **Regenerate native files** using `expo prebuild`

## Proper Setup (Do This Next)

### 1. Rotate Your API Keys

Since the API key was exposed in git:
- Go to https://console.cloud.google.com/apis/credentials
- Delete the old key: `AIzaSyCh1ybEuYu7ypDnz0JUrHHdVVDZPh8zJRs`
- Create a new API key
- Update your `.env` files with the new key

### 2. Update Environment Files

**Client `.env`:**
```bash
EXPO_PUBLIC_MAP_API_KEY=your_new_google_maps_api_key
```

**Server `.env`:**
```bash
GOOGLE_MAPS_API_KEY=your_new_google_maps_api_key
```

### 3. Regenerate Native Files

After updating `.env` files:

```bash
cd client
npx expo prebuild --clean
```

This will regenerate iOS and Android native files with the API key from your `.env` file via `app.config.js`.

### 4. Rebuild the App

```bash
# iOS
npx expo run:ios

# Android  
npx expo run:android
```

## Current Status

‚úÖ **Maps should work now** - API keys restored to native files
‚ö†Ô∏è **Security risk** - Keys are in native files (but not in git anymore)
üìù **Next step** - Rotate keys and use proper env var setup

## Why This Happened

The native files (Info.plist, AndroidManifest.xml) are generated by Expo during `expo prebuild`. When I changed them to use placeholders, they needed to be regenerated. The proper flow is:

1. Set API key in `.env` file
2. `app.config.js` reads from `.env`
3. Run `expo prebuild` to generate native files with the API key
4. Build the app

Since you need maps working now, I've restored the keys directly. But please follow the proper setup above for security.


